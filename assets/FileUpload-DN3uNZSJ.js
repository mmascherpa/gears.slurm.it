import{r as c,_ as b,b as f,h as B,c as M,a as k,f as p,g as m,w as v,d as S,o as h,e as V,t as z}from"./index-CHYnOP-6.js";const g={WARNING_THRESHOLD:50*1024*1024,MAX_SIZE:200*1024*1024};function F(i,e=2){if(i===0)return"0 Bytes";const a=1024,l=e<0?0:e,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(i)/Math.log(a));return parseFloat((i/Math.pow(a,n)).toFixed(l))+" "+r[n]}function w(i){if(!i)return{isValid:!1,hasWarning:!1,message:"No file selected",formattedSize:"0 Bytes",sizeInBytes:0};const e=i.size,a=F(e);return e>g.MAX_SIZE?{isValid:!1,hasWarning:!1,message:`File is too large (${a}). Maximum allowed size is ${F(g.MAX_SIZE)}.`,formattedSize:a,sizeInBytes:e}:e>g.WARNING_THRESHOLD?{isValid:!0,hasWarning:!0,message:`Large file detected (${a}). Processing may take longer than usual.`,formattedSize:a,sizeInBytes:e}:{isValid:!0,hasWarning:!1,message:"",formattedSize:a,sizeInBytes:e}}function H(){const i=c(!0),e=c(!1),a=c(""),l=c(""),r=c(""),n=()=>{i.value=!0,e.value=!1,a.value="",l.value="",r.value=""};return{isFileSizeValid:i,showFileSizeWarning:e,fileSizeWarningMessage:a,fileSizeError:l,fileSizeHint:r,clearFileValidation:n,handleFileSelection:o=>{if(n(),!o)return{isValid:!0};const t=w(o);if(r.value=`File size: ${t.formattedSize}`,t.isValid){if(t.hasWarning)return i.value=!0,e.value=!0,a.value=t.message,{isValid:!0,hasWarning:!0}}else return i.value=!1,l.value=t.message,{isValid:!1};return{isValid:!0}}}}const A={name:"FileUpload",props:{modelValue:{type:[File,Array],default:null},label:{type:String,default:"Select File"},accept:{type:String,default:"*/*"},prependIcon:{type:String,default:"mdi-paperclip"},hint:{type:String,default:""},persistentHint:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","validation-change","clear"],setup(i,{emit:e}){const{fileSizeError:a,fileSizeHint:l,fileSizeWarningMessage:r,isFileSizeValid:n,showFileSizeWarning:s,handleFileSelection:o,clearFileValidation:t}=H(),_=f(()=>l.value||i.hint),y=f(()=>i.label),W=f(()=>i.modelValue?[i.modelValue]:[]),E=d=>{const u=Array.isArray(d)&&d.length>0?d[0]:null;e("update:modelValue",u),u?(o(u),e("validation-change",{isValid:n.value,hasError:!!a.value,hasWarning:s.value})):(t(),e("validation-change",{isValid:!0,hasError:!1,hasWarning:!1}))},I=()=>{t(),e("update:modelValue",null),e("clear")},C=()=>{t()};return B([n,a,s],()=>{e("validation-change",{isValid:n.value,hasError:!!a.value,hasWarning:s.value})}),{computedHint:_,computedLabel:y,fileInputValue:W,fileSizeError:a,fileSizeWarningMessage:r,handleClear:I,handleClearError:C,handleFileChange:E,isFileSizeValid:n,showFileSizeWarning:s}}};function N(i,e,a,l,r,n){const s=S("v-file-input"),o=S("v-alert");return h(),M("div",null,[k(s,{"model-value":l.fileInputValue,"onUpdate:modelValue":l.handleFileChange,"onClick:clear":l.handleClear,label:l.computedLabel,accept:a.accept,variant:"outlined",density:"comfortable","prepend-icon":"","prepend-inner-icon":a.prependIcon,hint:l.computedHint,"persistent-hint":a.persistentHint,disabled:a.disabled,clearable:"","show-size":!1,class:"file-upload"},null,8,["model-value","onUpdate:modelValue","onClick:clear","label","accept","prepend-inner-icon","hint","persistent-hint","disabled"]),l.fileSizeError?(h(),p(o,{key:0,type:"error",variant:"tonal",class:"mt-2",density:"compact",closable:"","onClick:close":l.handleClearError},{default:v(()=>[V(z(l.fileSizeError),1)]),_:1},8,["onClick:close"])):m("",!0),l.showFileSizeWarning?(h(),p(o,{key:1,type:"warning",variant:"tonal",class:"mt-2",density:"compact",closable:"","onClick:close":e[0]||(e[0]=t=>l.showFileSizeWarning=!1)},{default:v(()=>[V(z(l.fileSizeWarningMessage),1)]),_:1})):m("",!0)])}const L=b(A,[["render",N],["__scopeId","data-v-9e8cc076"]]);export{L as F,F as f,w as v};
