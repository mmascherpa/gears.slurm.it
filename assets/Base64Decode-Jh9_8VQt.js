import{d as L}from"./fileDownload-B1vhVzTR.js";import{C as j,p as q}from"./CsvPreviewTable-bhG1WC7u.js";import{v as G}from"./FileUpload-DIrAnUGa.js";import{u as J}from"./useClipboard-KqVwDR14.js";import{u as Q}from"./useDebounce-Cu5x-8Qr.js";import{T as Y,S as $,u as ee}from"./ToolPageHeader-D-k5Jt3k.js";import{T as oe,F as ae}from"./TextInputWithActions-hOPLZdps.js";import{_ as te,a as le,c as ne,b as o,i as N,j as U,w as a,r as _,d as de,k as se,e as d,o as E,f as n,g as t,t as ie,p as re,h as ce}from"./index-CYaz045G.js";const ue={name:"Base64Decode",components:{CsvPreviewTable:j,FileUploadWithValidation:ae,LearnMorePanel:le,SharedSnackbar:$,TextInputWithActions:oe,ToolPageHeader:Y},setup(){const c=_(null),e=_(""),B=_(!1),x=_(""),h=_(null),p=_(""),i=_(""),b=_([]),w=_([]),{snackbar:z,snackbarText:g,snackbarColor:F,showSnackbar:l}=ee(),{pasteFromClipboard:I}=J(),k=de(()=>!!c.value),M=()=>{B.value=!0;try{x.value=atob(e.value)}catch(m){console.error("Base64 decoding error:",m),x.value="Error: Invalid Base64 string. Please check your input."}finally{B.value=!1}},A=async()=>{await I((m,v)=>{e.value=m,l(v,"success"),H()},m=>l(m,"error"))},W=()=>{e.value="",x.value=""},u=m=>{},O=(m,v)=>{const S=[".txt",".md",".json",".xml",".html",".css",".js",".log",".yaml",".yml"].some(s=>m.toLowerCase().endsWith(s)),T=v.byteLength<=8388608;return S&&T},X=()=>{if(!c.value){l("❌ Please select a file first","error");return}const m=G(c.value);if(!m.isValid){l(m.message,"error");return}if(c.value.size>15728640){l("❌ File too large for Base64 decoding. Maximum size is 15 MB.","error");return}const v=new FileReader;v.onerror=()=>{console.error("File read error:",v.error),l("❌ Failed to read file. Please try again.","error")},v.onload=()=>{try{const P=v.result.trim(),S=atob(P),T=new Uint8Array(S.length);for(let f=0;f<S.length;f++)T[f]=S.charCodeAt(f);const s=new Blob([T],{type:"application/octet-stream"}),V=c.value.name.replace(/\.base64$|\.b64\.txt$/,"");if(h.value=s,p.value=V,V.endsWith(".csv")){if(s.size<=8388608){const D=q(s);w.value=D.headers,b.value=D.data;const K=(s.size/1024).toFixed(2);l(`✓ CSV file decoded (${K} KB) - Preview shown`,"success")}else{L(s,V);const D=(s.size/(1024*1024)).toFixed(2);l(`✓ CSV file decoded (${D} MB) - Too large to preview, downloaded`,"info")}c.value=null;return}if(O(V,s)){const f=new TextDecoder;i.value=f.decode(T);const D=(s.size/1024).toFixed(2);l(`✓ Text file decoded (${D} KB) - Preview shown`,"success"),c.value=null;return}if(L(s,V),s.size>8388608){const f=(s.size/1048576).toFixed(2);l(`✓ File decoded (${f} MB) - Too large to preview, downloaded`,"info")}else l("✓ File decoded and downloaded!","success");c.value=null}catch(P){console.error("File decoding error:",P),l("❌ Failed to decode file. Please ensure it contains valid Base64 data.","error")}},v.readAsText(c.value)},Z=()=>{h.value&&p.value&&(L(h.value,p.value),l("✓ File downloaded successfully!","success"))},R=()=>{i.value="",b.value=[],w.value=[],h.value=null,p.value=""},{debounce:H}=Q(M,350);return se(e,()=>{e.value?H():x.value=""}),{encodedFile:c,encodedText:e,isLoading:B,plainText:x,decodedFileName:p,decodedFileText:i,tableData:b,tableHeaders:w,snackbar:z,snackbarColor:F,snackbarText:g,canDecodeFile:k,decodeFile:X,downloadDecodedFile:Z,clearDecodedOutput:R,handleClear:W,handleFileValidation:u,handlePaste:A}}},y=C=>(re("data-v-57d93a6e"),C=C(),ce(),C),me=y(()=>t("p",{class:"mb-2"},[t("strong",null,"Base64 decoding"),n(" reverses the encoding process, converting Base64 text back into its original binary format (files, images, etc.). ")],-1)),ve=y(()=>t("ul",{class:"ml-4 mb-2"},[t("li",null,[t("strong",null,"No password needed"),n(" - Base64 is not encryption, anyone can decode it")]),t("li",null,[t("strong",null,"Original size restored"),n(" - Decoded data returns to its original size")]),t("li",null,[t("strong",null,"Works with any Base64"),n(" - Can decode data from any source")])],-1)),fe=y(()=>t("p",{class:"mt-3 mb-2"},[t("strong",null,"Common use cases:"),n(" Extracting embedded images from HTML/CSS, decoding API responses, recovering files from Base64-encoded email attachments. ")],-1)),_e=y(()=>t("div",{class:"text-caption text-medium-emphasis mt-3"},[t("strong",null,"Learn more:"),t("a",{href:"https://en.wikipedia.org/wiki/Base64",target:"_blank",rel:"noopener noreferrer",class:"text-info"}," Wikipedia: Base64 "),n(" • "),t("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/atob",target:"_blank",rel:"noopener noreferrer",class:"text-info"}," MDN: atob() Function ")],-1)),pe={class:"flex-grow-1"},be=y(()=>t("div",{class:"text-subtitle-1 font-weight-medium"},"File Decoded Successfully",-1)),xe={class:"text-body-2"};function he(C,r,c,e,B,x){const h=d("ToolPageHeader"),p=d("LearnMorePanel"),i=d("v-icon"),b=d("v-card-title"),w=d("TextInputWithActions"),z=d("v-divider"),g=d("v-card-text"),F=d("v-card"),l=d("FileUploadWithValidation"),I=d("v-spacer"),k=d("v-btn"),M=d("v-textarea"),A=d("CsvPreviewTable"),W=d("SharedSnackbar");return E(),ne("div",null,[o(h,{title:"Base64 Decoder",description:"Decode Base64 text or files back to original format",icon:"mdi-arrow-up-bold-box","avatar-color":"secondary-darken-1"}),o(p,{title:"What is Base64 Decoding?","storage-key":"slurm-help-base64-decode"},{default:a(()=>[me,ve,fe,_e]),_:1}),o(F,{class:"mb-4"},{default:a(()=>[o(b,{class:"bg-surface-variant"},{default:a(()=>[o(i,{icon:"mdi-text",class:"mr-2"}),n(" Text Decoding ")]),_:1}),o(g,{class:"pa-4"},{default:a(()=>[o(w,{modelValue:e.encodedText,"onUpdate:modelValue":r[0]||(r[0]=u=>e.encodedText=u),label:"Base64 Encoded Text",placeholder:"Enter your Base64 encoded text here",rows:4,"is-loading":e.isLoading,"show-paste":!0,"show-clear":!0,"show-copy":!1,"test-id":"encoded-text-input",onPaste:e.handlePaste,onClear:e.handleClear,class:"mb-4"},null,8,["modelValue","is-loading","onPaste","onClear"]),o(z,{class:"my-4"}),o(w,{modelValue:e.plainText,"onUpdate:modelValue":r[1]||(r[1]=u=>e.plainText=u),label:"Decoded Output",placeholder:"Decoded plain text will appear here",rows:4,"is-loading":e.isLoading,readonly:!0,"show-paste":!1,"show-clear":!1,"show-copy":!0,"test-id":"output-text"},null,8,["modelValue","is-loading"])]),_:1})]),_:1}),o(F,null,{default:a(()=>[o(b,{class:"bg-surface-variant"},{default:a(()=>[o(i,{icon:"mdi-file",class:"mr-2"}),n(" File Decoding ")]),_:1}),o(g,{class:"pa-4"},{default:a(()=>[o(l,{modelValue:e.encodedFile,"onUpdate:modelValue":r[2]||(r[2]=u=>e.encodedFile=u),label:"Select a Base64 file to decode","button-text":"Decode File","button-icon":"mdi-arrow-up-bold-box","can-submit":e.canDecodeFile,onSubmit:e.decodeFile,onValidationChange:e.handleFileValidation},null,8,["modelValue","can-submit","onSubmit","onValidationChange"])]),_:1})]),_:1}),e.decodedFileText?(E(),N(F,{key:0,variant:"tonal",class:"mb-4"},{default:a(()=>[o(b,{class:"d-flex align-center"},{default:a(()=>[o(i,{icon:"mdi-file-document",class:"mr-2"}),n(" Decoded File Preview "),o(I),e.decodedFileName?(E(),N(k,{key:0,variant:"text",color:"primary",onClick:e.downloadDecodedFile,class:"mr-2"},{default:a(()=>[o(i,{start:""},{default:a(()=>[n("mdi-download")]),_:1}),n(" Download ")]),_:1},8,["onClick"])):U("",!0),o(k,{icon:"",size:"small",variant:"text",onClick:e.clearDecodedOutput},{default:a(()=>[o(i,null,{default:a(()=>[n("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1}),o(g,{class:"pa-4"},{default:a(()=>[o(M,{modelValue:e.decodedFileText,"onUpdate:modelValue":r[3]||(r[3]=u=>e.decodedFileText=u),label:"Decoded Content",variant:"outlined",rows:"10",readonly:"",class:"monospace-output","data-testid":"file-preview","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})):U("",!0),o(A,{headers:e.tableHeaders,data:e.tableData,"show-download":!!e.decodedFileName,"card-class":"mb-4","test-id":"file-preview",onClose:e.clearDecodedOutput,onDownload:e.downloadDecodedFile},null,8,["headers","data","show-download","onClose","onDownload"]),e.decodedFileName&&!e.decodedFileText&&!e.tableData.length?(E(),N(F,{key:1,variant:"tonal",color:"success"},{default:a(()=>[o(g,{class:"d-flex align-center pa-4"},{default:a(()=>[o(i,{icon:"mdi-check-circle",size:"32",class:"mr-4"}),t("div",pe,[be,t("div",xe,ie(e.decodedFileName),1)]),o(k,{variant:"elevated",color:"white",onClick:e.downloadDecodedFile,class:"mr-2"},{default:a(()=>[o(i,{start:""},{default:a(()=>[n("mdi-download")]),_:1}),n(" Download Again ")]),_:1},8,["onClick"]),o(k,{icon:"",size:"small",variant:"text",onClick:e.clearDecodedOutput},{default:a(()=>[o(i,null,{default:a(()=>[n("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})):U("",!0),o(W,{modelValue:e.snackbar,"onUpdate:modelValue":r[4]||(r[4]=u=>e.snackbar=u),text:e.snackbarText,color:e.snackbarColor},null,8,["modelValue","text","color"])])}const Ve=te(ue,[["render",he],["__scopeId","data-v-57d93a6e"]]);export{Ve as default};
