import{_ as k,r as D,b as T,f as p,g as v,w as n,n as S,d as r,o as h,a,e as d,i as y}from"./index-Be9HKwpV.js";function z(e){return!e||typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function N(e,o){const l=e.map(s=>({title:z(s),key:s})),t=o.map(s=>{const i={};return e.forEach((c,_)=>{i[c]=s[_]}),i});return{headers:l,data:t}}function U(e){let o=e;if(e instanceof Uint8Array&&(o=new TextDecoder().decode(e)),!o||typeof o!="string")return console.warn("Invalid CSV input"),{headers:[],data:[]};const t=o.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`).filter(s=>s.trim()).map(s=>s.split(","));return t.length===0?(console.warn("Empty CSV file"),{headers:[],data:[]}):N(t[0]||[],t.slice(1))}const B={name:"CsvPreviewTable",props:{headers:{type:Array,required:!0,default:()=>[]},data:{type:Array,required:!0,default:()=>[]},showDownload:{type:Boolean,default:!1},cardClass:{type:String,default:""},testId:{type:String,default:""}},emits:["close","download"],setup(e,{emit:o}){const l=D(""),t=T(()=>e.headers.length>0||e.data.length>0);return{searchQuery:l,isVisible:t,handleClose:()=>{o("close")},handleDownload:()=>{o("download")}}}},Q={class:"text-center pa-4"},A=y("p",{class:"text-body-2 text-medium-emphasis mt-2"},"No results to display",-1);function I(e,o,l,t,s,i){const c=r("v-icon"),_=r("v-spacer"),m=r("v-btn"),C=r("v-card-title"),w=r("v-text-field"),u=r("v-col"),f=r("v-row"),x=r("v-data-table"),b=r("v-card-text"),g=r("v-card");return t.isVisible?(h(),p(g,{key:0,variant:"tonal",class:S(l.cardClass),"data-testid":l.testId},{default:n(()=>[a(C,{class:"d-flex align-center"},{default:n(()=>[a(c,{icon:"mdi-table",class:"mr-2"}),d(" CSV Preview "),a(_),l.showDownload?(h(),p(m,{key:0,variant:"text",color:"primary",onClick:t.handleDownload,class:"mr-2"},{default:n(()=>[a(c,{start:""},{default:n(()=>[d("mdi-download")]),_:1}),d(" Download ")]),_:1},8,["onClick"])):v("",!0),a(m,{icon:"",size:"small",variant:"text",onClick:t.handleClose},{default:n(()=>[a(c,null,{default:n(()=>[d("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1}),a(b,{class:"pa-4"},{default:n(()=>[a(f,{class:"mb-4"},{default:n(()=>[a(u,{cols:"12",md:"4"},{default:n(()=>[a(w,{modelValue:t.searchQuery,"onUpdate:modelValue":o[0]||(o[0]=V=>t.searchQuery=V),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",density:"comfortable"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:n(()=>[a(u,null,{default:n(()=>[a(x,{headers:l.headers,items:l.data,search:t.searchQuery,density:"comfortable"},{"no-data":n(()=>[y("div",Q,[a(c,{size:"48",color:"grey"},{default:n(()=>[d("mdi-table-off")]),_:1}),A])]),_:1},8,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1},8,["class","data-testid"])):v("",!0)}const q=k(B,[["render",I]]);export{q as C,U as p};
