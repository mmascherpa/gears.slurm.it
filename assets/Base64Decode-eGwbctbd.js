import{d as A}from"./fileDownload-B1vhVzTR.js";import{C as K,p as j}from"./CsvPreviewTable-B7WrNYcs.js";import{v as q}from"./FileUpload-DN3uNZSJ.js";import{u as G}from"./useClipboard-KqVwDR14.js";import{u as J}from"./useDebounce-Bghpcebw.js";import{T as Q,S as Y,u as $}from"./ToolPageHeader-BuloaM-X.js";import{T as ee,F as oe}from"./TextInputWithActions-CFUGD0eU.js";import{_ as ae,c as le,a as o,f as M,g as W,w as a,r as v,b as te,h as de,d as n,o as B,e as f,i as L,t as ne,p as se,j as ie}from"./index-CHYnOP-6.js";const ce={name:"Base64Decode",components:{CsvPreviewTable:K,FileUploadWithValidation:oe,SharedSnackbar:Y,TextInputWithActions:ee,ToolPageHeader:Q},setup(){const i=v(null),e=v(""),k=v(!1),x=v(""),p=v(null),t=v(""),_=v(""),b=v([]),T=v([]),{snackbar:w,snackbarText:h,snackbarColor:E,showSnackbar:l}=$(),{pasteFromClipboard:F}=G(),P=te(()=>!!i.value),I=()=>{k.value=!0;try{x.value=atob(e.value)}catch(r){console.error("Base64 decoding error:",r),x.value="Error: Invalid Base64 string. Please check your input."}finally{k.value=!1}},z=async()=>{await F((r,u)=>{e.value=r,l(u,"success"),N()},r=>l(r,"error"))},c=()=>{e.value="",x.value=""},U=r=>{},X=(r,u)=>{const V=[".txt",".md",".json",".xml",".html",".css",".js",".log",".yaml",".yml"].some(d=>r.toLowerCase().endsWith(d)),C=u.byteLength<=8388608;return V&&C},Z=()=>{if(!i.value){l("❌ Please select a file first","error");return}const r=q(i.value);if(!r.isValid){l(r.message,"error");return}if(i.value.size>15728640){l("❌ File too large for Base64 decoding. Maximum size is 15 MB.","error");return}const u=new FileReader;u.onerror=()=>{console.error("File read error:",u.error),l("❌ Failed to read file. Please try again.","error")},u.onload=()=>{try{const y=u.result.trim(),V=atob(y),C=new Uint8Array(V.length);for(let m=0;m<V.length;m++)C[m]=V.charCodeAt(m);const d=new Blob([C],{type:"application/octet-stream"}),S=i.value.name.replace(/\.base64$|\.b64\.txt$/,"");if(p.value=d,t.value=S,S.endsWith(".csv")){if(d.size<=8388608){const g=j(d);T.value=g.headers,b.value=g.data;const R=(d.size/1024).toFixed(2);l(`✓ CSV file decoded (${R} KB) - Preview shown`,"success")}else{A(d,S);const g=(d.size/(1024*1024)).toFixed(2);l(`✓ CSV file decoded (${g} MB) - Too large to preview, downloaded`,"info")}i.value=null;return}if(X(S,d)){const m=new TextDecoder;_.value=m.decode(C);const g=(d.size/1024).toFixed(2);l(`✓ Text file decoded (${g} KB) - Preview shown`,"success"),i.value=null;return}if(A(d,S),d.size>8388608){const m=(d.size/1048576).toFixed(2);l(`✓ File decoded (${m} MB) - Too large to preview, downloaded`,"info")}else l("✓ File decoded and downloaded!","success");i.value=null}catch(y){console.error("File decoding error:",y),l("❌ Failed to decode file. Please ensure it contains valid Base64 data.","error")}},u.readAsText(i.value)},H=()=>{p.value&&t.value&&(A(p.value,t.value),l("✓ File downloaded successfully!","success"))},O=()=>{_.value="",b.value=[],T.value=[],p.value=null,t.value=""},{debounce:N}=J(I,350);return de(e,()=>{e.value?N():x.value=""}),{encodedFile:i,encodedText:e,isLoading:k,plainText:x,decodedFileName:t,decodedFileText:_,tableData:b,tableHeaders:T,snackbar:w,snackbarColor:E,snackbarText:h,canDecodeFile:P,decodeFile:Z,downloadDecodedFile:H,clearDecodedOutput:O,handleClear:c,handleFileValidation:U,handlePaste:z}}},re=D=>(se("data-v-5aa91efa"),D=D(),ie(),D),ue={class:"flex-grow-1"},me=re(()=>L("div",{class:"text-subtitle-1 font-weight-medium"},"File Decoded Successfully",-1)),ve={class:"text-body-2"};function fe(D,s,i,e,k,x){const p=n("ToolPageHeader"),t=n("v-icon"),_=n("v-card-title"),b=n("TextInputWithActions"),T=n("v-divider"),w=n("v-card-text"),h=n("v-card"),E=n("FileUploadWithValidation"),l=n("v-spacer"),F=n("v-btn"),P=n("v-textarea"),I=n("CsvPreviewTable"),z=n("SharedSnackbar");return B(),le("div",null,[o(p,{title:"Base64 Decoder",description:"Decode Base64 text or files back to original format",icon:"mdi-arrow-up-bold-box","avatar-color":"secondary-darken-1"}),o(h,{class:"mb-4"},{default:a(()=>[o(_,{class:"bg-surface-variant"},{default:a(()=>[o(t,{icon:"mdi-text",class:"mr-2"}),f(" Text Decoding ")]),_:1}),o(w,{class:"pa-4"},{default:a(()=>[o(b,{modelValue:e.encodedText,"onUpdate:modelValue":s[0]||(s[0]=c=>e.encodedText=c),label:"Base64 Encoded Text",placeholder:"Enter your Base64 encoded text here",rows:4,"is-loading":e.isLoading,"show-paste":!0,"show-clear":!0,"show-copy":!1,"test-id":"encoded-text-input",onPaste:e.handlePaste,onClear:e.handleClear,class:"mb-4"},null,8,["modelValue","is-loading","onPaste","onClear"]),o(T,{class:"my-4"}),o(b,{modelValue:e.plainText,"onUpdate:modelValue":s[1]||(s[1]=c=>e.plainText=c),label:"Decoded Output",placeholder:"Decoded plain text will appear here",rows:4,"is-loading":e.isLoading,readonly:!0,"show-paste":!1,"show-clear":!1,"show-copy":!0,"test-id":"output-text"},null,8,["modelValue","is-loading"])]),_:1})]),_:1}),o(h,null,{default:a(()=>[o(_,{class:"bg-surface-variant"},{default:a(()=>[o(t,{icon:"mdi-file",class:"mr-2"}),f(" File Decoding ")]),_:1}),o(w,{class:"pa-4"},{default:a(()=>[o(E,{modelValue:e.encodedFile,"onUpdate:modelValue":s[2]||(s[2]=c=>e.encodedFile=c),label:"Select a Base64 file to decode","button-text":"Decode File","button-icon":"mdi-arrow-up-bold-box","can-submit":e.canDecodeFile,onSubmit:e.decodeFile,onValidationChange:e.handleFileValidation},null,8,["modelValue","can-submit","onSubmit","onValidationChange"])]),_:1})]),_:1}),e.decodedFileText?(B(),M(h,{key:0,variant:"tonal",class:"mb-4"},{default:a(()=>[o(_,{class:"d-flex align-center"},{default:a(()=>[o(t,{icon:"mdi-file-document",class:"mr-2"}),f(" Decoded File Preview "),o(l),e.decodedFileName?(B(),M(F,{key:0,variant:"text",color:"primary",onClick:e.downloadDecodedFile,class:"mr-2"},{default:a(()=>[o(t,{start:""},{default:a(()=>[f("mdi-download")]),_:1}),f(" Download ")]),_:1},8,["onClick"])):W("",!0),o(F,{icon:"",size:"small",variant:"text",onClick:e.clearDecodedOutput},{default:a(()=>[o(t,null,{default:a(()=>[f("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1}),o(w,{class:"pa-4"},{default:a(()=>[o(P,{modelValue:e.decodedFileText,"onUpdate:modelValue":s[3]||(s[3]=c=>e.decodedFileText=c),label:"Decoded Content",variant:"outlined",rows:"10",readonly:"",class:"monospace-output","data-testid":"file-preview","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})):W("",!0),o(I,{headers:e.tableHeaders,data:e.tableData,"show-download":!!e.decodedFileName,"card-class":"mb-4","test-id":"file-preview",onClose:e.clearDecodedOutput,onDownload:e.downloadDecodedFile},null,8,["headers","data","show-download","onClose","onDownload"]),e.decodedFileName&&!e.decodedFileText&&!e.tableData.length?(B(),M(h,{key:1,variant:"tonal",color:"success"},{default:a(()=>[o(w,{class:"d-flex align-center pa-4"},{default:a(()=>[o(t,{icon:"mdi-check-circle",size:"32",class:"mr-4"}),L("div",ue,[me,L("div",ve,ne(e.decodedFileName),1)]),o(F,{variant:"elevated",color:"white",onClick:e.downloadDecodedFile,class:"mr-2"},{default:a(()=>[o(t,{start:""},{default:a(()=>[f("mdi-download")]),_:1}),f(" Download Again ")]),_:1},8,["onClick"]),o(F,{icon:"",size:"small",variant:"text",onClick:e.clearDecodedOutput},{default:a(()=>[o(t,null,{default:a(()=>[f("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})):W("",!0),o(z,{modelValue:e.snackbar,"onUpdate:modelValue":s[4]||(s[4]=c=>e.snackbar=c),text:e.snackbarText,color:e.snackbarColor},null,8,["modelValue","text","color"])])}const De=ae(ce,[["render",fe],["__scopeId","data-v-5aa91efa"]]);export{De as default};
